package test_heap_intramethod;

//
// Simple propagation / statement reduction
//
scenario HeapObjectResidualization {
	?Box@1 a;
	?a = ?new Box@1(dynamic(int,input));
	?int b;
	?b = ?a.value;
} assert {
	Box@1 a; a = new Box@1(dynamic(int,input));
	int b; b = a.value;
}

scenario HeapSimplePropagation {
	$Box@2 a;
	$a = $new Box@2(87);
	?int b;
	?b = lift($a.value);
} assert {
	int b; b = 87;
}

//
// Heap values
// 
class Box@1 extends Object {
	int value;
}

class Box@2 extends Object {
	$int value;
}

//
// Auxiliary declarations
//

primitive int;
